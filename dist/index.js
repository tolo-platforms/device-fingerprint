'use strict';function u(n){let e=3735928559,t=1103547991;for(let l=0;l<n.length;l++){let i=n.charCodeAt(l);e=Math.imul(e^i,2654435761),t=Math.imul(t^i,1597334677);}return e=Math.imul(e^e>>>16,2246822507),e^=Math.imul(t^t>>>13,3266489909),t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(e^e>>>13,3266489909),(4294967296*(2097151&t)+(e>>>0)).toString(36)}async function w(n){let t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}function m(){return {screenResolution:`${screen.width}x${screen.height}`,colorDepth:screen.colorDepth,pixelRatio:window.devicePixelRatio||1}}function d(){let n=navigator;return {platform:n.platform||"unknown",userAgent:n.userAgent,vendor:n.vendor||"",hardwareConcurrency:n.hardwareConcurrency||0,deviceMemory:n.deviceMemory??null,maxTouchPoints:n.maxTouchPoints||0,cookiesEnabled:n.cookieEnabled,doNotTrack:n.doNotTrack||null,plugins:A(),mimeTypes:D()}}function A(){let n=[];if(navigator.plugins)for(let e=0;e<navigator.plugins.length;e++){let t=navigator.plugins[e];t&&n.push(t.name);}return n}function D(){let n=[];if(navigator.mimeTypes)for(let e=0;e<navigator.mimeTypes.length;e++){let t=navigator.mimeTypes[e];t&&n.push(t.type);}return n}function f(){return {timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||"unknown",timezoneOffset:new Date().getTimezoneOffset(),language:navigator.language||"unknown",languages:Array.from(navigator.languages||[navigator.language])}}function p(){try{let n=document.createElement("canvas"),e=n.getContext("2d");if(!e)return null;n.width=200,n.height=50,e.fillStyle="#f0f0f0",e.fillRect(0,0,n.width,n.height),e.textBaseline="alphabetic",e.fillStyle="#069",e.font="14px 'Arial'",e.fillText("Tolo Fingerprint \u{1F510}",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.font="18px 'Times New Roman'",e.fillText("Canvas Test",4,35),e.beginPath(),e.arc(50,25,10,0,Math.PI*2,!0),e.closePath(),e.fillStyle="rgba(255, 0, 0, 0.5)",e.fill();let t=e.createLinearGradient(100,0,200,0);t.addColorStop(0,"blue"),t.addColorStop(1,"green"),e.fillStyle=t,e.fillRect(100,10,75,30);let r=n.toDataURL("image/png");return u(r)}catch{return null}}function h(){try{let n=document.createElement("canvas"),e=n.getContext("webgl")||n.getContext("experimental-webgl");if(!e)return {vendor:null,renderer:null};let t=e,r=t.getExtension("WEBGL_debug_renderer_info");return r?{vendor:t.getParameter(r.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(r.UNMASKED_RENDERER_WEBGL)}:{vendor:t.getParameter(t.VENDOR),renderer:t.getParameter(t.RENDERER)}}catch{return {vendor:null,renderer:null}}}async function S(n=1e3){try{let e=window.AudioContext||window.webkitAudioContext;if(!e)return null;let t=new e,r=t.createOscillator(),l=t.createAnalyser(),i=t.createGain(),a=t.createDynamicsCompressor();r.type="triangle",r.frequency.setValueAtTime(1e4,t.currentTime),a.threshold.setValueAtTime(-50,t.currentTime),a.knee.setValueAtTime(40,t.currentTime),a.ratio.setValueAtTime(12,t.currentTime),a.attack.setValueAtTime(0,t.currentTime),a.release.setValueAtTime(.25,t.currentTime),i.gain.setValueAtTime(0,t.currentTime),r.connect(a),a.connect(l),l.connect(i),i.connect(t.destination),r.start(0),await new Promise(g=>setTimeout(g,Math.min(n,500)));let c=new Float32Array(l.frequencyBinCount);l.getFloatFrequencyData(c),r.stop(),await t.close();let s=c.slice(0,30).join(",");return u(s)}catch{return null}}function v(){try{let n=["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Times New Roman","Trebuchet MS","Verdana","Helvetica","Monaco","Menlo","Consolas","Lucida Console","Tahoma","Palatino","Century Gothic","Bookman Old Style","Garamond","MS Gothic","MS PGothic","MS Mincho"],e=["monospace","sans-serif","serif"],t="mmmmmmmmmmlli",r="72px",i=document.createElement("canvas").getContext("2d");if(!i)return null;let a={};for(let s of e)i.font=`${r} ${s}`,a[s]=i.measureText(t).width;let c=[];for(let s of n){let g=!1;for(let o of e)if(i.font=`${r} '${s}', ${o}`,i.measureText(t).width!==a[o]){g=!0;break}g&&c.push(s);}return u(c.join(","))}catch{return null}}function x(){return {sessionStorage:C(),localStorage:P(),indexedDB:R()}}function C(){try{let n="__tolo_test__";return sessionStorage.setItem(n,n),sessionStorage.removeItem(n),!0}catch{return  false}}function P(){try{let n="__tolo_test__";return localStorage.setItem(n,n),localStorage.removeItem(n),!0}catch{return  false}}function R(){try{return !!window.indexedDB}catch{return  false}}var M="1.0.0",E={canvas:true,webgl:true,audio:true,fonts:true,timeout:1e3};async function b(n={}){let e={...E,...n},t=m(),r=d(),l=f(),i=x(),a=e.webgl?h():{vendor:null,renderer:null},[c,s,g]=await Promise.all([e.canvas?Promise.resolve(p()):Promise.resolve(null),e.audio?S(e.timeout):Promise.resolve(null),e.fonts?Promise.resolve(v()):Promise.resolve(null)]),o={...t,...l,...r,...i,canvas:c,webglVendor:a.vendor,webglRenderer:a.renderer,audioFingerprint:s,fontsHash:g},y=[o.screenResolution,o.colorDepth,o.pixelRatio,o.timezone,o.platform,o.hardwareConcurrency,o.deviceMemory,o.canvas,o.webglVendor,o.webglRenderer,o.audioFingerprint,o.fontsHash].filter(Boolean).join("|"),T=await w(y),F=[o.canvas,o.webglVendor,o.webglRenderer,o.audioFingerprint,o.fontsHash,o.screenResolution,o.colorDepth,o.platform,o.hardwareConcurrency,o.timezone,o.language,o.userAgent].filter(Boolean).length/12;return {deviceId:T,confidence:F,signals:o,timestamp:Date.now(),version:M}}async function _(n={}){return (await b(n)).deviceId}exports.getDeviceId=_;exports.getFingerprint=b;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map